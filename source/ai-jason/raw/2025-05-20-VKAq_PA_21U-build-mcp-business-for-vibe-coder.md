# Build MCP business for vibe coder

Published: 2025-05-20

This video is sponsored by Hatacon, one of the best open-source platform to monitor, debug and improve your production ready large model application. I was able to build this MCP server where it will prompt user to sign up, login and connect to cursor automatically. And when user prompt cursor to use this MCP, it will dynamically generate a payment link where it will ask for user credit card and charge them by MCP usage and only after user paid MCP will start working. And the more user use your MCP and find value, the more they will be charged. And you can set up sophisticated usage based tier to monetize your MCP server properly. This is what I want to take you through today. How to set up and monetize your own MCP server and distribute to thousands of people. So MCP obviously is the hottest topic for the past few months. It extends AI agents capability to integrate different type of systems or access external docs easily. And the beauty of MCP from my perspective is that anyone who has domain knowledge can actually build MCP to help agent complete specific tasks and distribute to hundreds of thousands of people. But one problem I see is that most of those MCPS today are just running locally on users machine. And obviously the setup is quite technical that made the distribution and monetization of MCP awkward. It mostly works for people who already use your product. Otherwise, they will need to go through it whole flow of go to your website, sign up, pay, get API key, add MCP server, and then start using. But what really caught my attention is that Stripe recently just released this agent SDK where you can easily create a paid MCP server by attaching a price ID and a tools to achieve some similar experience that I just showed you earlier. And that really change how you distribute and monetize MCP server. Now you can just get start using right away and while they are using it you can prompt them to upgrade. So this will make building MCP business much more interesting and this is what I want to take you through today and I will break that down into two parts. One is how do we set up a payment system for your MCP server by usage and second is how do you set up a nice authentication layer for your MCP server and we're going to use three very useful package. which one the stripe agent toolkit that allow you to connect payment very easily and cloudflare has this MCP class you can just turn any function right into a MCP tool and also set up the OOS layer and in the end we're going to use MCP remote which is allow you to achieve this type of UX that prompt user to create account and sign in but before you launch your paid MCP to the world how will you know if your pricing strategy for your large model product actually makes sense or if users are secretly burning through your API budgets this is where her headon is such a game changanger manager. So, Helicon is an all-in-one platform for monitoring, debugging, and most importantly, understanding how people are actually using your large model application. You get real-time visibility into exactly how much each user or endpoint is costing you down to every single API call, prompt, and model used. With this detailed cost and usage analytics, you can see which feature are driving your bill and where you might need to adjust your pricing to. But it goes way beyond just cost. It helps you analyze how people are interacting with your prompt which allow you to spotted patterns and understand where you can optimize and even get data sets so that you can fine-tune your own model to reduce cost while improving performance and reliability. It has loads of super useful functionalities like caching if users are asked the same requests to launch your model. It will just return the result cach before so it doesn't cost you anything and reduce latency. They also have prompt experiments feature where you can compare multiple different prompts across thousands of different real user requests. So you can iterate your prompts with confidence. So if you're building a paid MCP server or any large language model powered app, use headcom to monitor your cost, understand your users and build a business that actually scales. I have put a link in the description below for you to get start. Now without further ado, let me show you how to build a paid MCP server. So, Stripe has this agent toolkit. They allow you to define an MCP server and you can just add payment gator tools by define the name, the function as well as price ID. And with this, you can set up quite sophisticated pricing strategy. Either set up a one-off pricing for lifetime access to your awesome MCB server. But you can also set up a recurring subscription as well as usage based pricing, which is probably the most interesting and suitable one for MCP server where you probably use different AI model behind the scenes. And all those capabilities can be achieved with just few lines of code by using this paid MCP agent class provided by stripe. So this paid MCP agent class is a extended version of Cloudflare's MCP agent class which is a package that allow you to turn any functions you build into a MCP2 very easily. Let me take you through this MCP agent very quickly so you understand the fundamentals. Then we showcase some new capabilities from this paid MCP agent class. You can just open cursor in any folder and do this. Create Cloudflare test my MCP server template is Cloudflare AI demo remote MCP oles and inside source folder. This index ts is how you can set up MCP server. So you will use this class defined by cloudflare called MCP agent. Give a name version and then start adding tools like a simple MCP tool for adding numbers together or a bit more sophisticated calculation. You can give it the name, the type of input that this tool should take and define the actual functionalities. All you need to do just pasting the name of MCP server the URL/MCP. So this is how simple it is for you to create your own MCP. And what Strap did is basically have a new class called paid MCP agent that is built based upon Clawflar's MCP agent class. So the setup is very similar. You can still add public tools like what you did before. But what you can do now is that you can also add a paid tool and all you need to do just passing on this additional information which is price ID the payment reason which will show up if user haven't paid to explain why they should upgrade and that's pretty much it with this setup. If a user try to call this specific MCB tool but they haven't paid yet, it will return a result of the payment link as well as a reason why they need to pay. So the agent can actually render and show this payment link to the user. And as I mentioned before, there are multiple different ways you can set up payment strategy. This example of how do you set up a one-time payment. Just go to Stripe, create a product, and the pricing will be one off, give the price, then you will get this pricing ID that you can copy and paste over. You will need to define a payment success, which is where do you want to take users to after they pay successfully. So you can create a nice looking page that showing users instruction about what to do next. So this is a onetime payment. You can also create a subscription payment where setup is almost identical except the pricing will be recurring and you can set up flat rate fee here and pasting over the price ID and the mode will be subscription. But the most interesting part is this usage based payment method every time when user uses MCP tool. It will record a usage and consumer credits. You need to do is choose this usage based pricing. The most common one is probably per tier. So let's say you want to set up a emoji generator MCP. The first five generation will be free per unit price will be zero and there's no flat fee. After that you want to charge $1 and it will give them some credits to generate let's say 30 emojis. You want to give a new tier which charge $10 that gives them 500 credits. If they exceed that 500 quota then you will charge 0.001 per new emoji generated. So you can create that but you will need to attach a meter. You can search for meter on stripe and then create a meter. Meter is basically counter that keep track the usage of the user. You can give a name and choosing how you want this meter to be added. You will choose that meter to track the usage. Then you can just copy this pricing ID over to the line item here as well as meter event which is this event name you can get from the meter page and the mode will be still subscription. So this setup will automatically track the usage. So in this example chat earlier I call this MCP server 10 times and in the invoice automatically track my usage and calculate the invoice dynamically. So this is how you can use stripe agent toolkit to add pricing and payment to your MCP server so you can start monetize. If you want to get more in depth step-by-step tutorial I have detailed breakdown for how to build a proper MCP server as well as template that already have authentication and payment built in. All those tutorial and MCP template will be inside AI builder club I'm building. I have put the link in the description below. So if you're interested, feel free to join. But apart from that, you also need to set up authentication system for the MCP server. So user can sign up and track their usage. So here we're going to use two things. One is Cloudflare OS provider. Another is a MCP remote package. So to build authentication system for your own MCP server, you actually need to do something called OOS. OS is a protocol that allow user to grant access to certain client application to the server data. For example, you often will see things like login with Google or login with Facebook. That's kind of common use case for OASP. But for MCP, we need to use OAS because for MCP, you often just build a server and it is designed to be used in multiple different clients like cursor, wing serve. And the way it work is that when someone add your MCP server to cursor, it will send a request to to the MCP server to check if a user already logging or not. If it's not authorized, it'll open the browser, get a O code and wait for user to login successfully. And after that, it will ping server to generate access code and verify if user grant access. This flow might feels a bit more complicated. But the good thing is that Cloudflare actually provides this OS provider class that is automatically handling the pipeline for this OS. All you need to do just implement a actual signup flow and put that logic inside the default handler and you don't need to worry about any other stuff. And if you check the example ripple from stripe that's exactly what they did. So in the index.ts at top they were defined those pay tools but at the bottom there's a OS provider where the default handler is app which is stored in this app.ts. So inside app.ts it has this /authorized endpoint and they just have this mock authentication system that is always log in true. So it will just always assume that user login and they can go to the approval directly by putting the email and click approve. So to build actual authentication layer you just need to build your own authentication flow which I will show you how to do very quickly then replace logic inside/auorize instead of always log in you need to do the check does the user actually login if not you show them a signup page so this is cloudfare part the second piece that you really need is this package called MCP remote mcp remote as I mentioned before is a special package that help you mimic UX where you will prompt user to login when they try to connect your MCP server in cursor cuz if you don't have that and just do the normal connection it won't be able to connect the system properly because user hadn't given any authentication user will have to go to your application generate a API key and pass on here but what MCP remote will do is that you can just change the command to MPX MCP remote and the URL endpoint this will kind of mimic the experience so when user try to add that it will automatically open the browser and prompt user to sign in and only after user approve the MCP tools will show up properly so with These two things together you can achieve that experience where it prompt user to log in they can start using right away and for the first time it will prompt user to give credit card and upgrade and you will capture the email address of every single users who are interesting using your MCP server and here's one quick example of how I build the authentication system based on stripe ripple I showed earlier I use superbase as authentication system creating new superbase project and if I go to setting data API it will give me this URL as well as anonymous key I just need to change thedev.v vars which is like EMV file for Cloudflare superbase URL and key and service row key which is this three items here then go to authentications turn on the email authentication and then go to emails to set up the email templates they're going to send to user when they try to create account the approach I normally use is a one-time password which is every time when user put in the email address we send them a six digits for one-time password this one I found has best email deliverability so I don't need to worry about those email goes to users like spam sandbox. So you can just change this and add a token here and then click save. Once you've done that, we just need to create a superbase.ts which has a function to set up a superbase client and then a function to send onetime password to the user and superbase already have the predefined function to handle everything. So you don't need to worry about that too much as well as a function to verify if the onetime password is correct. And we also have a session TS. This is to be used after user sign once you want to remember that they have been signed in. So they don't need to keep doing this. So it has this function called store sessions as well as get sessions when user try to connect server again and in app.ts TS you will want to change the logic inside / authorize and again / authorize is where you will define the whole logic about check if user login already if not it will request onetime password verify it the endpoint for verifying the onetime password and the page where we're going to show to users after they make a payment successfully that's pretty much it if you want to learn more I have detailed breakdown of how to build a proper MCP server with code example and explanation so you can follow along copy paste and plugin as as a paid MCP template. They already have authentication os flow and stripe payment set up publicly. So you can just take and launch your own paid MCP server a few hours. All those tutorial and templates is available in AI builder cloud where we have a community of top AI builders who are building and launching their own AI products. So they might already experience a problem and challenge that you are facing today. You can come and get advice as well as in-depth course about AI coding and building large model application from myself and industry experts and we're continuously providing more and more useful tools to bootstrap your process of building and launching AI products from SAS templates and tank coder which can help you generate effective PRD and cursor rules and many other perks of essential parts. If you're interested, I have put a link in the description below for you to click and join. I'm really excited to see what type of MC you're going to build. I hope you enjoy this video and I see you next